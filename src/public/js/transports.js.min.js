const wispUrl=localStorage.getItem("wispUrl")||("https:"===location.protocol?"wss":"ws")+"://"+location.host+"/wisp/",connection=new BareMux.BareMuxConnection("/baremux/worker.js");function setTransports(t){switch(t){case"libcurl":setLibcurlTransport();break;case"epoxy":default:setEpoxyTransport();break;case"bare":setBareTransport(localStorage.getItem("bare"))}}function setLibcurlTransport(){connection.setTransport("/libcurl/index.mjs",[{wisp:localStorage.getItem("wispUrl")||wispUrl}])}function setDefaultTransport(){localStorage.getItem("transports")?setTransports():(localStorage.setItem("transports","epoxy"),setEpoxyTransport())}function refreshEpoxyTransport(){setTransports()}function setEpoxyTransport(){connection.setTransport("/epoxy/index.mjs",[{wisp:localStorage.getItem("wispUrl")||wispUrl}])}function setBareTransport(t){connection.setTransport("/baremodule/index.mjs",[t])}