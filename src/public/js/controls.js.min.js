function settingsPage(e){!0===e&&(document.getElementById("settings-container").classList.remove("dnone"),setPage("settings")),!1===e&&document.getElementById("settings-container").classList.add("dnone")}function gamesPage(e){!0===e&&(document.getElementById("games-container").classList.remove("dnone"),setPage("games"),fetchGames()),!1===e&&document.getElementById("games-container").classList.add("dnone")}function refreshPage(){let e=getCurrentTab(),t=document.querySelector(`[data-iframe-id="${e}"]`);try{t.contentWindow.location.reload()}catch(e){}}function previousPage(){let e=getCurrentTab(),t=document.querySelector(`[data-iframe-id="${e}"]`);try{t.contentWindow.history.back()}catch(e){}}function nextPage(){let e=getCurrentTab(),t=document.querySelector(`[data-iframe-id="${e}"]`);try{t.contentWindow.history.forward()}catch(e){}}function popout(){let e=getCurrentTab(),t=document.querySelector(`[data-iframe-id="${e}"]`);try{let e=t.src;window.open(e,"_blank").focus()}catch(e){}}function updateURLBar(e){let t=getCurrentTab(),n=(document.querySelector(`[data-iframe-id="${t}"]`),localStorage.getItem("proxy"));e=e.replace(window.location.origin,""),"uv"===n&&(e=e.replace(__uv$config.prefix,""),e=__uv$config.decodeUrl(e)),"dynamic"===n&&(e=e.replace(__dynam$ic.prefix,""),e=__dynam$ic.decodeUrl(e)),"rammerhead"===n&&(e=""),"a`owt8bnalk"===e&&(e=""),updateSearch(e)}function fullscreen(){let e=getCurrentTab(),t=document.querySelector(`[data-iframe-id="${e}"]`);try{"full"===localStorage.getItem("fullScreen")&&t.requestFullscreen(),"page"===localStorage.getItem("fullScreen")&&(t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="9998",t.style.transition="all 0.5s ease-in-out",document.getElementById("exit-iframe").classList.remove("dnone"),document.addEventListener("keydown",(function(e){"Escape"===e.key&&exitIframe()})))}catch(e){}}function searchBar(e){const t=document.getElementById("uv-form");document.getElementById("uv-address").value=e,t.dispatchEvent(new Event("submit")),resetOmniBox()}function updateSearch(e){document.getElementById("search-input").value=e}function isIframeLoaded(){let e=getCurrentTab(),t=document.querySelector(`[data-iframe-id="${e}"]`);addRightClickToIframe(e),updateTabDetail("Loading...","loading.gif"),t.addEventListener("load",(function(){addRightClickToIframe(e),updateTabDetail(t.contentWindow.document.title,t.contentWindow.document.querySelector('link[rel="icon"]')?proxyOtherStuff(t.contentWindow.document.querySelector('link[rel="icon"]').href):"favicon.ico",e),updateURLBar(t.contentWindow.location.href),addToHistory(t.contentWindow.location.href,t.contentWindow.document.title,t.contentWindow.document.querySelector('link[rel="icon"]')?proxyOtherStuff(t.contentWindow.document.querySelector('link[rel="icon"]').href):"favicon.ico")}))}function exitIframe(){iframe.style.position="",iframe.style.top="",iframe.style.left="",iframe.style.width="",iframe.style.height="",iframe.style.zIndex="",iframe.style.transition="",document.getElementById("exit-iframe").classList.add("dnone")}function historySidebar(){document.getElementById("history").classList.remove("dnone"),setPage("history")}function closeHistorySidebar(){document.getElementById("history").classList.add("dnone")}function addToHistory(e,t,n){document.getElementById("history");let o=document.getElementById("history-content"),i=document.createElement("div");i.setAttribute("id","history-item");let r=document.createElement("a");r.setAttribute("id","history-link"),r.setAttribute("onclick",`handoffToTABS('${e}')`);let a=document.createElement("p");a.innerText=t;let l=document.createElement("img");l.setAttribute("src",n);let d=document.createElement("li");if(d.setAttribute("id","history-delete"),d.setAttribute("onclick",`deleteHistoryItem(${o.childElementCount})`),d.classList.add("fa-solid","fa-trash"),r.appendChild(l),r.appendChild(a),i.appendChild(r),o.appendChild(i),i.appendChild(d),null===localStorage.getItem("history")){let o=[];o.push({url:e,title:t,favicon:n}),localStorage.setItem("history",JSON.stringify({history:o}))}else{let o=JSON.parse(localStorage.getItem("history")).history;o.push({url:e,title:t,favicon:n,id:o.length}),localStorage.setItem("history",JSON.stringify({history:o}))}}function restoreHistory(){document.getElementById("history");let e=document.getElementById("history-content");null!==localStorage.getItem("history")&&JSON.parse(localStorage.getItem("history")).history.forEach((function(t){let n=document.createElement("div");n.setAttribute("id","history-item");let o=document.createElement("a");o.setAttribute("id","history-link"),o.setAttribute("onclick",`handoffToTABS('${t.url}')`);let i=document.createElement("p");i.innerText=t.title;let r=document.createElement("img");r.setAttribute("src",t.favicon);let a=document.createElement("li");a.setAttribute("id","history-delete"),a.setAttribute("onclick",`deleteHistoryItem(${t.id})`),a.classList.add("fa-solid","fa-trash"),o.appendChild(r),o.appendChild(i),n.appendChild(o),n.appendChild(a),e.appendChild(n)}))}function deleteHistoryItem(e){if(null===localStorage.getItem("history"))return;let t=JSON.parse(localStorage.getItem("history")).history;t=t.filter((t=>t.id!=e)),localStorage.setItem("history",JSON.stringify({history:t})),document.getElementById("history-content").innerHTML="",restoreHistory()}function historySidebarKeybinds(){document.addEventListener("keydown",(function(e){e.altKey&&"h"===e.key&&(document.getElementById("history").classList.contains("dnone")?historySidebar():home(closeHistorySidebar()))})),console.log("history keybinds loaded"),restoreHistory(),console.log("history restored")}