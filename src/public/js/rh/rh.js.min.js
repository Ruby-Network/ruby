function RammerheadEncode(e){const t=(e,t)=>(e%t+t)%t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~-",r="_rhs";class o{constructor(e=function(){let e="";const t=n.split("");for(;t.length>0;)e+=t.splice(Math.floor(Math.random()*t.length),1)[0];return e}()){this.dictionary=e}shuffle(e){if(e.startsWith(r))return e;let o="";for(let r=0;r<e.length;r++){const s=e.charAt(r),i=n.indexOf(s);"%"===s&&e.length-r>=3?(o+=s,o+=e.charAt(++r),o+=e.charAt(++r)):o+=-1===i?s:this.dictionary.charAt(t(i+r,64))}return r+o}unshuffle(e){if(!e.startsWith(r))return e;e=e.slice(4);let o="";for(let r=0;r<e.length;r++){const s=e.charAt(r),i=this.dictionary.indexOf(s);"%"===s&&e.length-r>=3?(o+=s,o+=e.charAt(++r),o+=e.charAt(++r)):o+=-1===i?s:n.charAt(t(i-r,64))}return o}}function s(e,t,n=!1){var r=new XMLHttpRequest;r.open("GET",e,!0),r.send(),r.onerror=function(){n||console.log("Cannot communicate with the server")},r.onload=function(){200===r.status?t(r.responseText):n||console.log('unexpected server response to not match "200". Server says "'+r.responseText+'"')}}var i,a={newsession(e){s("/rammer/newsession",e)},sessionexists(e,t){s("/rammer/sessionexists?id="+encodeURIComponent(e),(function(e){return"exists"===e?t(!0):"not found"===e?t(!1):void console.log("unexpected response from server. received"+e)}))},shuffleDict(e,t){console.log("Shuffling",e),s("/rammer/api/shuffleDict?id="+encodeURIComponent(e),(function(e){t(JSON.parse(e))}))}},c="rammerhead_sessionids",l="rammerhead_default_sessionid",f={get(){var e=localStorage.getItem(c);if(!e)return[];try{var t=JSON.parse(e);if(!Array.isArray(t))throw"getout";return t}catch(e){return[]}},set(e){if(!e||!Array.isArray(e))throw new TypeError("must be array");localStorage.setItem(c,JSON.stringify(e))},getDefault(){var e=localStorage.getItem(l);if(e){var t=f.get();if(t.filter((function(t){return t.id===e})),t.length)return t[0]}return null},setDefault(e){localStorage.setItem(l,e)}};return new Promise((e=>{var t=localStorage.getItem("session-string");a.sessionexists(t,(function(n){n?e(t):(console.log("Session validation failed"),a.newsession((function(t){!function(e){var t=f.get();t.unshift({id:e,createdOn:(new Date).toLocaleString()}),f.set(t)}(t),localStorage.setItem("session-string",t),console.log(t),console.log("^ new id"),e(t)})))}))})).then((t=>new Promise(((n,r)=>{a.shuffleDict(t,(function(r){var s=new o(r);i="/rammer/"+t+"/"+s.shuffle(e),console.log(i),n(i)}))}))))}